var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,n=(e,t)=>{for(var i in t||(t={}))s.call(t,i)&&r(e,i,t[i]);if(a)for(var i of a(t))l.call(t,i)&&r(e,i,t[i]);return e},o=(e,a)=>t(e,i(a));import{H as h,r as d,j as m,P as c,bg as p,R as g,C as j,c as x,N as u,bd as b,B as y,bh as w}from"./index-d2d7b15f.js";import{g as f,U as v,c as I}from"./UploadImage-f92cea6d.js";import{a as O}from"./download-36439099.js";import{I as P}from"./index-2f72779e.js";import{S}from"./index-14db43f1.js";import"./index-9582e2a9.js";import"./useForceUpdate-59187eb8.js";import"./DeleteOutlined-badb0f04.js";import"./CheckOutlined-2bb83f5e.js";import"./List-23252932.js";const F={width:1920,height:1080,ratio:100,quality:1,mimeType:"image/png"},C={width:1920,height:1080,aspectRatio:1920/1080,imgSrc:w},R=()=>{const[e]=h.useForm(),[t,i]=d.useState(C);d.useEffect((()=>{f(w).then((({width:a,height:s})=>{e.setFieldsValue({width:a,height:s}),i(o(n({},t),{width:a,height:s,aspectRatio:a/s}))}))}),[]);const a=(i,a)=>{const s=Number("width"===a?Math.round(i*t.aspectRatio).toFixed(0):Math.round(i/t.aspectRatio).toFixed(0)),l=Number(Math.round(s/t[a]*100).toFixed(2));e.setFieldsValue({[a]:s,ratio:l})};return m.jsx(c,{plugin:p,children:m.jsxs(g,{gutter:12,children:[m.jsx(j,{span:16,children:m.jsx(x,{title:"图片区域",bordered:!1,bodyStyle:{height:"500px"},children:m.jsx("div",{className:"flex-center",children:m.jsx("div",{style:{width:"800px",height:"450px",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:`url(${t.imgSrc})`}})})})}),m.jsx(j,{span:8,children:m.jsx(x,{title:"设置区域",bordered:!1,bodyStyle:{height:"500px"},children:m.jsxs(h,{form:e,colon:!1,labelCol:{span:6},wrapperCol:{span:18},labelAlign:"left",initialValues:n({},F),style:{width:"300px",margin:"60px auto 0"},onFinish:e=>{const{width:i,height:a,quality:s,mimeType:l}=e,r=l.replace(/image\//,"")||"png";I(t.imgSrc,{width:i,height:a,quality:s,mimeType:l}).then((e=>{O(e,`compress-image.${r}`)}))},children:[m.jsx(h.Item,{label:"图片上传",children:m.jsx(v,{name:"选择图片",isFull:!0,onSuccess:a=>{i(o(n({},t),{imgSrc:a})),f(a).then((({width:a,height:s})=>{e.setFieldsValue({width:a,height:s}),i(o(n({},t),{width:a,height:s,aspectRatio:a/s}))}))}})}),m.jsx(h.Item,{label:"图片尺寸",style:{marginBottom:0},children:m.jsxs(u,{children:[m.jsx(h.Item,{name:"width",children:m.jsx(P,{min:0,max:t.width,controls:!1,addonBefore:m.jsx("span",{children:"宽"}),onChange:e=>a(e,"height")})}),m.jsx(h.Item,{children:m.jsx(b,{name:"linking"})}),m.jsx(h.Item,{name:"height",children:m.jsx(P,{min:0,max:t.height,controls:!1,addonBefore:m.jsx("span",{children:"高"}),onChange:e=>a(e,"width")})})]})}),m.jsx(h.Item,{label:"压缩比例",name:"ratio",children:m.jsx(P,{min:0,max:100,controls:!1,formatter:e=>`${e}%`,disabled:!0,style:{width:"100%"}})}),m.jsx(h.Item,{label:"图片质量",name:"quality",children:m.jsx(S,{options:[{value:1,label:100},{value:.8,label:80},{value:.6,label:60},{value:.4,label:40}]})}),m.jsx(h.Item,{label:"图片格式",name:"mimeType",children:m.jsx(S,{options:[{value:"image/png",label:"PNG"},{value:"image/jpg",label:"JPG"},{value:"image/bmp",label:"BMP"}]})}),m.jsx(h.Item,{label:" ",children:m.jsx(y,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"压缩图片"})})]})})})]})})};export{R as default};
