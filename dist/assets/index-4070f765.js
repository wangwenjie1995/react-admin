import{u as e,T as t,S as n,f as r,F as a,c as s,e as c,h as o,C as l}from"./iconUtil-84f7f0d4.js";import{r as i,Q as d,V as f,n as u,A as p,ck as h,bX as m,h as y,_ as b}from"./index-2823d128.js";const x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};var g=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:x}))};const v=i.forwardRef(g);const E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};var w=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:E}))};const K=i.forwardRef(w);const N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};var O=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:N}))};const j=i.forwardRef(O);function k(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:a,direction:s="ltr"}=e,c="ltr"===s?"left":"right",o="ltr"===s?"right":"left",l={[c]:-n*a+4,[o]:0};switch(t){case-1:l.top=-3;break;case 1:l.bottom=-3;break;default:l.bottom=-3,l[c]=a+4}return u.createElement("div",{style:l,className:`${r}-drop-indicator`})}const S=u.forwardRef(((r,a)=>{var s;const{getPrefixCls:c,direction:o,virtual:l,tree:i}=u.useContext(p),{prefixCls:d,className:f,showIcon:b=!1,showLine:x,switcherIcon:g,blockNode:v=!1,children:E,checkable:w=!1,selectable:K=!0,draggable:N,motion:O,style:S}=r,H=c("tree",d),C=c(),z=null!=O?O:Object.assign(Object.assign({},h(C)),{motionAppear:!1}),I=Object.assign(Object.assign({},r),{checkable:w,selectable:K,showIcon:b,motion:z,blockNode:v,showLine:Boolean(x),dropIndicatorRender:k}),[M,L,P]=e(H),[,A]=m(),R=A.paddingXS/2+((null===(s=A.Tree)||void 0===s?void 0:s.titleHeight)||A.controlHeightSM),$=u.useMemo((()=>{if(!N)return!1;let e={};switch(typeof N){case"function":e.nodeDraggable=N;break;case"object":e=Object.assign({},N)}return!1!==e.icon&&(e.icon=e.icon||u.createElement(j,null)),e}),[N]);return M(u.createElement(t,Object.assign({itemHeight:R,ref:a,virtual:l},I,{style:Object.assign(Object.assign({},null==i?void 0:i.style),S),prefixCls:H,className:y({[`${H}-icon-hide`]:!b,[`${H}-block-node`]:v,[`${H}-unselectable`]:!K,[`${H}-rtl`]:"rtl"===o},null==i?void 0:i.className,f,L,P),direction:o,checkable:w?u.createElement("span",{className:`${H}-checkbox-inner`}):w,selectable:K,switcherIcon:e=>u.createElement(n,{prefixCls:H,switcherIcon:g,treeNodeProps:e,showLine:x}),draggable:$}),E))}));var H,C;function z(e,t,n){const{key:r,children:a}=n;e.forEach((function(e){const s=e[r],c=e[a];!1!==t(s,e)&&z(c||[],t,n)}))}function I(e){let{treeData:t,expandedKeys:n,startKey:a,endKey:s,fieldNames:c}=e;const o=[];let l=H.None;if(a&&a===s)return[a];if(!a||!s)return[];return z(t,(e=>{if(l===H.End)return!1;if(function(e){return e===a||e===s}(e)){if(o.push(e),l===H.None)l=H.Start;else if(l===H.Start)return l=H.End,!1}else l===H.Start&&o.push(e);return n.includes(e)}),r(c)),o}function M(e,t,n){const a=b(t),s=[];return z(e,((e,t)=>{const n=a.indexOf(e);return-1!==n&&(s.push(t),a.splice(n,1)),!!a.length}),r(n)),s}(C=H||(H={}))[C.None=0]="None",C[C.Start=1]="Start",C[C.End=2]="End";var L=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function P(e){const{isLeaf:t,expanded:n}=e;return t?i.createElement(a,null):n?i.createElement(v,null):i.createElement(K,null)}function A(e){let{treeData:t,children:n}=e;return t||o(n)}const R=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:a}=e,o=L(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const l=i.useRef(),d=i.useRef(),[f,u]=i.useState(o.selectedKeys||o.defaultSelectedKeys||[]),[h,m]=i.useState((()=>(()=>{const{keyEntities:e}=s(A(o));let t;return t=n?Object.keys(e):r?c(o.expandedKeys||a||[],e):o.expandedKeys||a,t})()));i.useEffect((()=>{"selectedKeys"in o&&u(o.selectedKeys)}),[o.selectedKeys]),i.useEffect((()=>{"expandedKeys"in o&&m(o.expandedKeys)}),[o.expandedKeys]);const{getPrefixCls:x,direction:g}=i.useContext(p),{prefixCls:v,className:E,showIcon:w=!0,expandAction:K="click"}=o,N=L(o,["prefixCls","className","showIcon","expandAction"]),O=x("tree",v),j=y(`${O}-directory`,{[`${O}-directory-rtl`]:"rtl"===g},E);return i.createElement(S,Object.assign({icon:P,ref:t,blockNode:!0},N,{showIcon:w,expandAction:K,prefixCls:O,className:j,expandedKeys:h,selectedKeys:f,onSelect:(e,t)=>{var n;const{multiple:r,fieldNames:a}=o,{node:s,nativeEvent:c}=t,{key:i=""}=s,f=A(o),p=Object.assign(Object.assign({},t),{selected:!0}),m=(null==c?void 0:c.ctrlKey)||(null==c?void 0:c.metaKey),y=null==c?void 0:c.shiftKey;let x;r&&m?(x=e,l.current=i,d.current=x,p.selectedNodes=M(f,x,a)):r&&y?(x=Array.from(new Set([].concat(b(d.current||[]),b(I({treeData:f,expandedKeys:h,startKey:i,endKey:l.current,fieldNames:a}))))),p.selectedNodes=M(f,x,a)):(x=[i],l.current=i,d.current=x,p.selectedNodes=M(f,x,a)),null===(n=o.onSelect)||void 0===n||n.call(o,x,p),"selectedKeys"in o||u(x)},onExpand:(e,t)=>{var n;return"expandedKeys"in o||m(e),null===(n=o.onExpand)||void 0===n?void 0:n.call(o,e,t)}}))},$=i.forwardRef(R),T=S;T.DirectoryTree=$,T.TreeNode=l;const V=T;export{V as T};
