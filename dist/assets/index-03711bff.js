var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&i(e,n,t[n]);return e},o=(e,r)=>t(e,n(r));import{t as c,r as d,A as p,u as m,i as b,h as u,B as x,bq as h,br as y,bs as f,l as g,o as j,bt as v,K as C,H as O,j as k,P as w,bu as P,c as I,N,k as E,I as T}from"./index-2a561653.js";import{D as S,d as F}from"./index-67887f03.js";import{T as $}from"./Table-28c52432.js";import{g as D,a as z,P as V}from"./index-660ccea8.js";import{S as Y}from"./index-2134df4c.js";import{S as B}from"./index-044c9330.js";import{R as W}from"./index-fbebeaa1.js";import{I as M}from"./index-594c817f.js";import"./List-04044699.js";import"./iconUtil-716d15f4.js";import"./objectDestructuringEmpty-47c1eead.js";import"./useForceUpdate-2e74d350.js";import"./index-9b02312f.js";import"./CheckOutlined-777876c7.js";const _=c("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:r,zIndexPopup:a,colorText:l,colorWarning:i,marginXXS:s,marginXS:o,fontSize:c,fontWeightStrong:d,colorTextHeading:p}=e;return{[t]:{zIndex:a,[`&${r}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:o,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:i,fontSize:c,lineHeight:1,marginInlineEnd:o},[`${t}-title`]:{fontWeight:d,color:p,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:s,color:l}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:o}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});var H=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const A=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:r,title:a,description:l,cancelText:i,okText:s,okType:o="primary",icon:c=d.createElement(f,null),showCancel:g=!0,close:j,onConfirm:v,onCancel:C,onPopupClick:O}=e,{getPrefixCls:k}=d.useContext(p),[w]=m("Popconfirm",b.Popconfirm),P=D(a),I=D(l);return d.createElement("div",{className:`${t}-inner-content`,onClick:O},d.createElement("div",{className:`${t}-message`},c&&d.createElement("span",{className:`${t}-message-icon`},c),d.createElement("div",{className:`${t}-message-text`},P&&d.createElement("div",{className:u(`${t}-title`)},P),I&&d.createElement("div",{className:`${t}-description`},I))),d.createElement("div",{className:`${t}-buttons`},g&&d.createElement(x,Object.assign({onClick:C,size:"small"},r),null!=i?i:null==w?void 0:w.cancelText),d.createElement(h,{buttonProps:Object.assign(Object.assign({size:"small"},y(o)),n),actionFn:v,close:j,prefixCls:k("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=s?s:null==w?void 0:w.okText)))},K=e=>{const{prefixCls:t,placement:n,className:r,style:a}=e,l=H(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=d.useContext(p),s=i("popconfirm",t),[o]=_(s);return o(d.createElement(z,{placement:n,className:u(s,r),style:a,content:d.createElement(A,Object.assign({prefixCls:s},l))}))};var R=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const U=d.forwardRef(((e,t)=>{var n,r;const{prefixCls:a,placement:l="top",trigger:i="click",okType:s="primary",icon:o=d.createElement(f,null),children:c,overlayClassName:m,onOpenChange:b,onVisibleChange:x}=e,h=R(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:y}=d.useContext(p),[O,k]=g(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),w=(e,t)=>{k(e,!0),null==x||x(e),null==b||b(e,t)},P=y("popconfirm",a),I=u(P,m),[N]=_(P);return N(d.createElement(V,Object.assign({},j(h,["title"]),{trigger:i,placement:l,onOpenChange:t=>{const{disabled:n=!1}=e;n||w(t)},open:O,ref:t,overlayClassName:I,content:d.createElement(A,Object.assign({okType:s,icon:o},e,{prefixCls:P,close:e=>{w(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(globalThis,t)},onCancel:t=>{var n;w(!1,t),null===(n=e.onCancel)||void 0===n||n.call(globalThis,t)}})),"data-popover-inject":!0}),v(c,{onKeyDown:e=>{var t,n;d.isValidElement(c)&&(null===(n=null==c?void 0:(t=c.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===C.ESC&&O&&w(!1,e)})(e)}})))}));U._InternalPanelDoNotUseOrYouWillBeFired=K;const X=U,q=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],G={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},J=e=>{var t=e,{editing:n,dataIndex:i,cellType:c,record:d,children:p}=t,m=((e,t)=>{var n={};for(var i in e)a.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&l.call(e,i)&&(n[i]=e[i]);return n})(t,["editing","dataIndex","cellType","record","children"]);const b=((e,t)=>{switch(e){case"number":return k.jsx(M,{min:1e3,max:2e3});case"text":return k.jsx(T,{});case"radio":return k.jsx(W.Group,{options:["男","女"].map((e=>({value:e,label:e})))});case"date":return k.jsx("div",{children:k.jsx(S,{defaultValue:F(t.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return k.jsx(B,{options:["初中","高中","大专","本科"].map((e=>({value:e}))),style:{width:"80px"}});case"checkbox":return k.jsx(E.Group,{options:t.hobby.split("、"),defaultValue:t.hobby.split("、")});case"switch":return k.jsx(Y,{defaultChecked:t.forbid})}})(c,d);return k.jsx("td",o(s({},m),{children:n?k.jsx(O.Item,{name:i,style:{margin:0},children:b}):p}))},L=()=>{const[e]=O.useForm(),[t,n]=d.useState(q),[r,a]=d.useState(""),l=e=>e.key===r,i=()=>{a("")},c=r=>{return l=void 0,i=null,o=function*(){try{const l=yield e.validateFields(),i=[...t],o=i.findIndex((e=>r===e.key));if(o>-1){const e=i[o];i.splice(o,1,s(s({},e),l)),n(i),a("")}else i.push(l),n(i),a("")}catch(l){}},new Promise(((e,t)=>{var n=e=>{try{a(o.next(e))}catch(n){t(n)}},r=e=>{try{a(o.throw(e))}catch(n){t(n)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);a((o=o.apply(l,i)).next())}));var l,i,o},p=[{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"编号"}),k.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"姓名"}),k.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"性别"}),k.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"生日"}),k.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"学历"}),k.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"爱好"}),k.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"禁止编辑"}),k.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(e,t)=>k.jsx("span",{children:t.forbid?"是":"否"})},{title:()=>k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"操作"}),k.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(t,n)=>l(n)?k.jsxs(N,{children:[k.jsx(x,{type:"primary",ghost:!0,onClick:()=>c(n.key),children:"保存"}),k.jsx(X,{title:"是否取消编辑？",onConfirm:i,children:k.jsx(x,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):k.jsx(x,{disabled:""!==r,onClick:()=>(t=>{e.setFieldsValue(s({},t)),a(t.key)})(n),children:"编辑"})}].map((e=>e.editable?o(s({},e),{onCell:t=>({record:t,cellType:G[e.dataIndex].type,dataIndex:e.dataIndex,title:e.title,editing:l(t)})}):e));return k.jsx(w,{plugin:P,children:k.jsx(I,{bordered:!1,children:k.jsx(O,{form:e,component:!1,children:k.jsx($,{components:{body:{cell:J}},dataSource:t,columns:p,pagination:!1})})})})};export{L as default};
